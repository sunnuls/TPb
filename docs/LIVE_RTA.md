# LIVE RTA (Live Real‑Time Assistant)

## Важно: этика и правила

Этот проект содержит компонент "Live RTA" (оверлей + периодический анализ по скриншотам), который *может* быть неправомерно использован для подсказок в реальном времени.

- **Только для обучения / отладки / симуляторов.**
- **Не используйте для получения преимущества в покер-румах.** Это может нарушать правила площадок и принципы честной игры.
- По умолчанию в проекте включён **ethical mode**: рекомендации раскрываются **только после вашего действия** (post‑action).

## Quickstart

### 1) Установить зависимости

Рекомендуется устанавливать extras `live`:

```bash
pip install -e ".[live,dev]"
```

Extras `live` включают `pyqt5`, `keyboard`, `mss`, `opencv-python`, `pytesseract`.

### 2) Запуск

```bash
python -m coach_app.rta.live_rta --config <path_to_yaml> --mode overlay --ethical
```

Параметры:

- `--mode overlay` — показать полупрозрачный оверлей поверх стола.
- `--ethical` — (по умолчанию) скрывать подсказки до post‑action.
- `--no-ethical` — отключить gating (не рекомендуется).

### 3) Hotkeys

- `space` — **force analyze** (считать, что действие совершено; разрешить выдачу рекомендации на следующем обновлении)
- `esc` — остановить loop

## Политика (Policy)

- В `ethical_mode=True` до получения post‑action в overlay будет показываться:
  - `Waiting for your action...`
- Даже после post‑action вывод всё равно проходит через `enforce_policy(...)`.

## Несколько столов (best-effort)

Поддерживается best‑effort режим детекта нескольких окон стола (Windows):

- Если `region` в конфиге задан — используется только один стол (одна область).
- Если `region` не задан, можно включить `tables.enabled=true` и указать `tables.title_regex`.

Пример фрагмента конфига:

```yaml
tables:
  enabled: true
  title_regex: "PokerStars|Hold'em|Table"
```

Ограничения:

- Детект окон зависит от наличия библиотеки `pygetwindow`.
- Координаты окон используются как region для `mss`.

## Отладка

- Если оверлей не появляется, проверьте установку `pyqt5`.
- Если hotkeys не работают, запустите терминал/IDE с правами, позволяющими `keyboard` перехватывать ввод (на Windows иногда требуются админ-права).
