#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Ç–µ–∫—É—â–µ–π –º–æ–¥–µ–ª–∏"""
import os
import sys

print("=" * 70)
print("üîç –ü–†–û–í–ï–†–ö–ê –¢–ï–ö–£–©–ò–• –ú–û–î–ï–õ–ï–ô")
print("=" * 70)

model_path = 'weights/best.pt'
if not os.path.exists(model_path):
    print(f"\n‚ùå –ú–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {model_path}")
    print("\nüí° –°–∫–∞—á–∞–π –º–æ–¥–µ–ª—å –≤—Ä—É—á–Ω—É—é! –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ —Ñ–∞–π–ª–µ:")
    print("   –ö–ê–ö_–°–ö–ê–ß–ê–¢–¨_–†–ê–ë–û–ß–£–Æ_–ú–û–î–ï–õ–¨.md")
    sys.exit(1)

size_mb = os.path.getsize(model_path) / 1024 / 1024
print(f"\nüìÑ –§–∞–π–ª: {model_path}")
print(f"üíæ –†–∞–∑–º–µ—Ä: {size_mb:.1f} MB")

if size_mb < 5:
    print("‚ùå –ü–†–û–ë–õ–ï–ú–ê: –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π!")
    print("   –≠—Ç–æ –ù–ï –æ–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∫–∞—Ä—Ç!")
    print("   –†–∞–∑–º–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 20-100 MB")
    is_good = False
elif size_mb < 15:
    print("‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ –±–∞–∑–æ–≤–∞—è YOLOv8-nano/small")
    print("   –ù–ï –æ–±—É—á–µ–Ω–∞ –Ω–∞ –∫–∞—Ä—Ç–∞—Ö, –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–æ—Ö–æ!")
    is_good = False
elif size_mb < 70:
    print("‚úÖ –û–¢–õ–ò–ß–ù–û: –≠—Ç–æ YOLOv8-medium —Ä–∞–∑–º–µ—Ä")
    print("   –í–µ—Ä–æ—è—Ç–Ω–æ –æ–±—É—á–µ–Ω–∞ –Ω–∞ –∫–∞—Ä—Ç–∞—Ö!")
    is_good = True
else:
    print("‚úÖ –û–¢–õ–ò–ß–ù–û: –≠—Ç–æ YOLOv8-large —Ä–∞–∑–º–µ—Ä")
    print("   –í–µ—Ä–æ—è—Ç–Ω–æ –æ–±—É—á–µ–Ω–∞ –Ω–∞ –∫–∞—Ä—Ç–∞—Ö!")
    is_good = True

print("\n" + "=" * 70)
if is_good:
    print("‚úÖ –ú–û–î–ï–õ–¨ –í–´–ì–õ–Ø–î–ò–¢ –•–û–†–û–®–û - –¢–ï–°–¢–ò–†–£–ï–ú!")
    print("=" * 70)
    print("\nüöÄ –ó–∞–ø—É—Å–∫–∞—é —Ç–µ—Å—Ç –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ...")
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –º–æ–¥–µ–ª—å
    try:
        from ultralytics import YOLO
        from PIL import Image
        
        model = YOLO(model_path)
        print("‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!")
        
        # –ü—Ä–æ–±—É–µ–º —Ç–µ—Å—Ç –Ω–∞ —Å—Ç–æ–ª–µ
        if os.path.exists('stol/photo_2026-01-16_19-35-24.jpg'):
            img_path = 'stol/photo_2026-01-16_19-35-24.jpg'
        elif os.path.exists('—Å—Ç–æ–ª–æ–∫.jpg'):
            img_path = '—Å—Ç–æ–ª–æ–∫.jpg'
        else:
            print("‚ö†Ô∏è  –°–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç–æ–ª–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω")
            sys.exit(0)
        
        print(f"üñºÔ∏è  –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞: {img_path}")
        results = model(img_path, conf=0.25, verbose=False)
        
        total_detections = len(results[0].boxes) if results else 0
        print(f"\nüéØ AI –Ω–∞—à–µ–ª –æ–±—ä–µ–∫—Ç–æ–≤: {total_detections}")
        
        if total_detections >= 5:
            print("‚úÖ –û–¢–õ–ò–ß–ù–û! –ú–æ–¥–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç –∫–∞—Ä—Ç—ã!")
            print("   –ó–∞–ø—É—Å—Ç–∏ GUI –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π!")
        elif total_detections > 0:
            print("‚ö†Ô∏è  –ú–æ–¥–µ–ª—å —á—Ç–æ-—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç, –Ω–æ –º–∞–ª–æ...")
            print("   –í–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–∞ –º–æ–¥–µ–ª—å –ø–æ–ª—É—á—à–µ")
        else:
            print("‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ú–æ–¥–µ–ª—å –ù–ï –Ω–∞—Ö–æ–¥–∏—Ç –∫–∞—Ä—Ç—ã!")
            print("   –ù—É–∂–Ω–∞ –º–æ–¥–µ–ª—å, –æ–±—É—á–µ–Ω–Ω–∞—è –Ω–∞ –∏–≥—Ä–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç–∞—Ö!")
            print("\nüí° –°–∫–∞—á–∞–π –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –º–æ–¥–µ–ª—å:")
            print("   –ß–∏—Ç–∞–π: –ö–ê–ö_–°–ö–ê–ß–ê–¢–¨_–†–ê–ë–û–ß–£–Æ_–ú–û–î–ï–õ–¨.md")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–µ: {e}")
        
else:
    print("‚ùå –ú–û–î–ï–õ–¨ –ù–ï –ü–û–î–•–û–î–ò–¢!")
    print("=" * 70)
    print("\nüí° –°–ö–ê–ß–ê–ô –†–ê–ë–û–ß–£–Æ –ú–û–î–ï–õ–¨:")
    print("   –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ö–ê–ö_–°–ö–ê–ß–ê–¢–¨_–†–ê–ë–û–ß–£–Æ_–ú–û–î–ï–õ–¨.md")
    print("\nüîó –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ (—Å–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è):")
    print("   https://universe.roboflow.com/roboflow-100/playing-cards-ow27d")
    print("   –ù–∞–∂–º–∏ Export -> YOLOv8 -> Download")

print()
